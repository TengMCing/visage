<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>visage OOP system • visage</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="visage OOP system">
<meta property="og:description" content="visage">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">visage</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9007</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/visage-OOP.html">visage OOP system</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/TengMCing/visage/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>visage OOP system</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/TengMCing/visage/blob/HEAD/vignettes/visage-OOP.Rmd" class="external-link"><code>vignettes/visage-OOP.Rmd</code></a></small>
      <div class="hidden name"><code>visage-OOP.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tengmcing.github.io/visage/" class="external-link">visage</a></span><span class="op">)</span></code></pre></div>
<div class="section level1">
<h1 id="introduction-and-background">Introduction and Background<a class="anchor" aria-label="anchor" href="#introduction-and-background"></a>
</h1>
<p>In this vignette, basic terminologies of OOP system will be discussed, the implementation of the visage OOP system</p>
<div class="section level2">
<h2 id="oop">OOP<a class="anchor" aria-label="anchor" href="#oop"></a>
</h2>
<p><strong>OOP</strong> stands for <strong>object-oriented programming</strong>, which is a programming paradigm based on <strong>objects</strong>. Usually, object is defined as a special type of data structure that can hold both <strong>attributes</strong> (data) and <strong>methods</strong> (associated behaviors).</p>
<p><strong>OOP</strong> has been heavily used in R via the S3 system. However, users who have learned OOP in other languages are often dissatisfied with its syntax. This vignette introduces an OOP system provided by the <code>visage</code> package, which tries to implement a lightweight OOP system with python-like syntax in R using the “environment” language feature. This OOP system is developed primarily for the ease of designing,</p>
<p>managing</p>
<p>Other OOP system such as R6 overcomes this problem,</p>
</div>
<div class="section level2">
<h2 id="class-and-instance">Class and instance<a class="anchor" aria-label="anchor" href="#class-and-instance"></a>
</h2>
<p>Different kinds of objects are designed to belong to different <strong>classes</strong>. For example, data frame and list are designed to belong to two different S3 classes in R. This can be checked by using</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.frame"</span></code></pre></div>
<p>and <code>class(list())</code>. However, if you call <code>unclass(data.frame())</code>, you will see that data frame is actually just a named list with some additional attributes, which means they are two of the similar kind. So, why would they belong to different S3 classes? It is because they are two different data structures and are expected to behave differently. Data frame is a two-dimensional like structure, while list is a dynamic array like data structure. In terms of the associated behaviors, one obvious example is data frame has the method <code>dim</code> to obtain the dimensions of the object, but list does not.</p>
<p>Objects are <strong>instances</strong> of classes. For example, if we define <code>a &lt;- data.frame(b = 1)</code>, then <code>a</code> is an instance of class <code>data.frame</code> (checked by <code>is(a, "data.frame")</code>). Every instance has its own set of data and behaviors. If we define <code>b &lt;- data.frame(a = 2, b = 2)</code>, then both <code>b</code> and <code>a</code> are instances of class <code>data.frame</code>, but they have different sets of data.</p>
</div>
<div class="section level2">
<h2 id="inheritance-and-composition">Inheritance and composition<a class="anchor" aria-label="anchor" href="#inheritance-and-composition"></a>
</h2>
<p>Though data frame and list are two different kinds of objects, they still have commonalities. In fact, the result of <code>extends("data.frame", "list")</code> shows that list is a super class of data frame (this is a bit controversial, see <a href="https://stackoverflow.com/questions/19607652/why-doesnt-classdata-frame-show-list-inheritance" class="external-link uri">https://stackoverflow.com/questions/19607652/why-doesnt-classdata-frame-show-list-inheritance</a>). In other words, data frame <strong>inherits</strong> from list in R. In OOP, <strong>Inheritance</strong> is probably the most famous and widely-used relationship. A class can inherit both attributes and methods from its parent class (super class or base class, these terms used interchangeably in most cases). This gives us the ability to define family tree like class system.</p>
<p>For example, we could define an <code>employee</code> class with two attributes <code>name</code> and <code>emp_id</code> and a method <code>string</code>, which is a function of giving a string representation of information about the employee. Then we could define another class called <code>manager</code>. Notice managers are still employees, so we also need to keep track of their names and IDs, and be able to print their information. Therefore, class <code>manager</code> needs to inherit attributes and methods from <code>employee</code>. Suppose we need the <code>manager</code> class to also be able to keep track of its team members, that means we need a new attribute called <code>team_members</code>, which typically would be a list of <code>employee</code> instances. This is called composition, which is the act of collecting several objects in one object.</p>
</div>
<div class="section level2">
<h2 id="constructor-initializer-and-self">Constructor, initializer and <code>self</code><a class="anchor" aria-label="anchor" href="#constructor-initializer-and-self"></a>
</h2>
<p>If we use pseudo code (actually Python code) to illustrate this example, where the key word <code>class</code> is the starting point of a class definition, and key word <code>def</code> is the starting point of a function or method definition, then the <code>employee</code> and <code>manager</code> will look like this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> employee:</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, emp_id):</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.emp_id <span class="op">=</span> emp_id</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> string(<span class="va">self</span>):</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="va">self</span>.emp_id <span class="op">+</span> <span class="st">' '</span> <span class="op">+</span> <span class="va">self</span>.name</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> manager(employee):</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, emp_id, team_members):</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.emp_id <span class="op">=</span> emp_id</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.team_members <span class="op">=</span> team_members</span></code></pre></div>
<p>Let’s first have a look at the class definition,</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> employee:</span></code></pre></div>
<p>it starts with the key word <code>class</code>, followed by a class name.</p>
<p>In the <code>manager</code> class,</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> manager(employee):</span></code></pre></div>
<p>it includes the <code>employee</code> class in the round brackets, which means <code>employee</code> is its parent class.</p>
<p>Under the class definition of <code>employee</code>,</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> employee:</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, emp_id):</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.emp_id <span class="op">=</span> emp_id</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> string(<span class="va">self</span>):</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="va">self</span>.emp_id <span class="op">+</span> <span class="st">' '</span> <span class="op">+</span> <span class="va">self</span>.name</span></code></pre></div>
<p>there are two user defined methods. The <code>__init__</code> method is a special method, it is responsible for <strong>initializing an object</strong>, so it is often called <strong>initializer</strong>. The <code>__init__</code> method of the <code>employee</code> class takes 3 arguments, <code>self</code>, <code>name</code> and <code>emp_id</code>. Arguments <code>name</code> and <code>emp_id</code> are easy to understand, they are just data that you need to provide to initialize the object, just like <code>a = 1</code> in <code>data.frame(a = 1)</code>.</p>
<p>Argument <code>self</code> is special, it is <strong>a reference to an object</strong>. Therefore, the next line of code <code>self.name = name</code> can be interpreted as “assign the content of <code>name</code> to an attribute called <code>name</code> of the object <code>self</code>”. However, where is <code>self</code> actually points to? The answer is, it depends. But for the purpose of this vignette, it is enough to interpret <code>self</code> as <strong>a reference to an object itself</strong>. It may sound confusing,</p>
<p><code>class_name()</code> is responsible for building an instance of the corresponding class with provided information.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>John <span class="op">=</span> employee(name <span class="op">=</span> <span class="st">"John"</span>, emp_id <span class="op">=</span> <span class="st">"1"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>Mike <span class="op">=</span> employee(name <span class="op">=</span> <span class="st">"Mike"</span>, emp_id <span class="op">=</span> <span class="st">"2"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>Mary <span class="op">=</span> manager(name <span class="op">=</span> <span class="st">"Mary"</span>, emp_id <span class="op">=</span> <span class="st">"3"</span>, team_members <span class="op">=</span> [John, Mike])</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Weihao Li.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
